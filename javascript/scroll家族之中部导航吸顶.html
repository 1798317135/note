<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css" media="screen">
		*{
			margin: 0;
			padding: 0;
			list-style:none;
			user-select:none;
			border:none;
			text-decoration:none;
		}
		html,body{
			width: 100%;
			height: 100%;
		}
		#pic,#pic img{
			width: 100%;
			height: 70px;
		}
		nav{
			width: 900px;
			height: 50px;
			background-color:#ccc;
			border-radius: 10px;
			margin:10px auto;
			position:relative;
		}
		nav ul{
			position: relative;
		}	
		nav ul li{
			float: left;
			width: 100px;
			height: 100%;
			line-height: 53px;
			text-align: center;

			
		}
		nav ul li,a{
			color: orangered;
			font-size: 1em;
			font-weight: bolder;
		}
		nav span{
			width: 100px;
			height: 50px;
			position:absolute;
			left:0;
			background:url(../html5/images/58e7019422b34.png) no-repeat;
			background-size: 98% 98%;		
		}
		.nav_top{
			position:fixed;
			top:20px;
			left:50%;
			transform: translate(-50%, -50%);
		}
	</style>
</head>
<body>
	<div id="pic">
		<img src="../html5/images/13.jpg" alt="">
	</div>
	<nav id="nav">
		<span id="tm_img"></span>
		<ul>
			<li><a href="javascript:" title="">首页</a></li>
			<li><a href="javascript:" title="">第一页</a></li>
			<li><a href="javascript:" title="">第二页</a></li>
			<li><a href="javascript:" title="">第三页</a></li>
			<li><a href="javascript:" title="">第四页</a></li>
			<li><a href="javascript:" title="">第五页</a></li>
			<li><a href="javascript:" title="">第六页</a></li>
			<li><a href="javascript:" title="">第七页</a></li>
			<li><a href="javascript:" title="">第八页</a></li>
		</ul>
	</nav>
	<main>
		<img src="../html5/images/15.jpg" alt="">
	</main>
	<script>
		window.onload = function(){
			//获取节点
			var nav = document.getElementById("nav");

			var ul = nav.children[1];
			
			var span = document.getElementById("tm_img");

			var lis = ul.children;
			// 
			var startX = 0,timer =null;
			//1.0 给每个li 绑定事件
			for (var i = 0; i < lis.length; i++) {

				//1.1 当鼠标进入时
				lis[i].onmouseover = function(){	
					end = this.offsetLeft;
				};

				//1.2 当鼠标离开时
				lis[i].onmouseout = function(){
					// 当鼠标移开的时候让图标返回到起始位置
					end = startX;
				}

				//1.3 当鼠标点击时
				lis[i].onmousedown = function(){
					//当鼠标点击的时候 起始位置等于this.offsetLeft;
					startX = this.offsetLeft;
				}
			}
			//2.0 缓动动画
			var start = 0, end = 0;
			setInterval(function(){
				start += (end - start) * 0.6;
				//2.1 带入到需要动画的节点
				span.style.left = start +"px";
			},100);
			//3.0 监听屏幕滚动 设置导航吸顶
			window.onscroll = function(){
				//3.1 获取导航距离头部高度
				var spanH = nav.offsetTop;
				console.log(spanH);
				//3.2 获取滚动条距离顶端的距离
				var scrollX = scroll().top;
				console.log(scrollX);
				//3.3 判断如果屏幕偏移距离大于top
				if (scrollX>=spanH) {
					nav.className ="nav_top";
				}else{
					nav.className="";
				}
			}
			/**
			 * 封装scroll兼容模式
			 * @return[scrollTop and scrollLeft]
			 */
			function scroll(){
			if (window.pageXoffset!==null) {
				return {
					top:window.pageYOffset,
					left:window.pageXOffset,
				}
			}else if(document.Compat==="CSS1Compat"){
				return {
					top:document.documentElement.scrollTop,
					left:document.documentElement.scrollLeft,
				}
			}
			return{
				top:document.body.scrollTop,
				left:document.body.scrollLeft,
			}
		}
		}
	</script>
</body>
</html>