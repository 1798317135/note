<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css" media="screen">
	*{
		margin: 0;
		padding: 0;
		border:0;
		user-select: none;
	}
	#box{
		position: relative;
		width: 100%;
		height: 3000px;
	}
	#masking{
		width: 100%;
		height: 100%;
		background: rgba(0,0,0,0.4);
		position:absolute;
		top:0;
		left: 0;
		display: none;
	}
	#login{
		width: 500px;
		height: 200px;
		background-color: white;
		position:relative;
		top:50%;
		left:50%;
		margin:-100px -250px;
		border-radius: 5px;
		display: none;
	}
	#login span:nth-of-type(1){
		display: inline-block;
		width: 30px;
		height: 30px;
		position:absolute;
		right: 0;
		top: 0;
		background-color:#ccc;
		text-align: center;
		font-size: 1.5em;
		line-height:30px;
		cursor:pointer;
	}
	#login span:nth-of-type(1):hover{
		color:red;
	}
	#login span:last-of-type{
		display:inline-block;
		position:absolute;
		left: 50%;
		top:50%;
		margin-top: -15px;
		margin-left: -30px;
		width: 60px;
		height: 30px;
		background-color:red;
		text-align: center;
		line-height: 30px;
		cursor:pointer;
		border-radius:5px;

	}
	</style>
</head>
<body>
	
	<div id="box">
		<button>登录</button>
		</div>
		<div id="masking">
		<div id="login" class="login">
			<span>x</span>
			<span>登录</span>
		</div>
		</div>
	<script>
		window.onload = function(){
			var btn = document.querySelector("button");
			var box = document.getElementById("box");
			var login = document.getElementById("login");
			var mask = document.getElementById("masking");
			console.log(mask);
			var span = login.children[0];
			var login1 = login.children[1];
			//1.0 监听登录点击
			btn.onclick = function(){
				//1.1 显示蒙版
				mask.style.display = "block";
				login.style.display= "block";
				//1.2 滚动条消失
				document.body.style.overflow = "hidden";
			}
			//2.0 监听错号的点击
			span.onclick = function(event){
				var e = event||window.event;
				// 2.1 防止事件冒泡
				if (event&&event.stopPropagation) {
					event.stopPropagation();
				}else{
					window.cancelBubble=true;
				}
				mask.style.display="none";
				login.style.display="none";	
				document.body.style.overflow = "";
			}
			//3.0 监听login的点击
			mask.onclick = function(event){
				var e = event||window.event;
				// 2.1 捕获事件源
				// 兼容式写法
				var targetId = event.target?event.target.id:event.srcElement.id;
				console.log(targetId)
				if (targetId===this.id) {
					mask.style.display="none";
					login.style.display="none";	
					document.body.style.overflow = "";
				}		
				}
			//4.0 监听登录并转跳
			login1.onclick = function(event){
				window.location.href="http://www.baidu.com";
			}
		}
	</script>
</html>