<!DOCTYPE html>
<html lang="zhang">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css" media="screen">
		*{
			margin: 0;
			padding: 0;
			list-style: none;
			user-select: none;
			text-decoration:none;
		}
		body,html{
			width: 100%;
			height: 100%;
		}
		#slideShow{
			width: 800px;
			height: 500px;
			margin:100px auto;
			position: relative;
			overflow: hidden;
		}
		img{
			width: 800px;
			height: 450px;
			vertical-align: top;
		}
		.main-scroll{
			width: 800px;
			height: 450px;
			position: relative;
		}
		.slideShow-main{
			width: 1600px;
			height: 450px;
			position:relative;
		}
		.main-img{
			width: 800px;
			height: 450px;
			position: absolute;
		}
		#ct{
			width: 800px;
			height: 50px;
		}
		.ct-dir{
			display: inline-block;
			width: 50px;
			height: 100px;
			text-align: center;
			line-height: 100px;
			font-size:3em;
			font-family:"楷体";
			font-weight: bolder;
			cursor: pointer;
			position: absolute;
			background-color:rgba(0,0,0,0.5);
		}
		.left{
			left:10px;
			top:50%;
			margin-top: -50px;
		}
		.right{
			right:10px;
			top:50%;
			margin-top: -50px;
		}
		.ct-index{
			width:800px;
			height:50px;
			text-align: center;
			display: flex;
			justify-content: center;
		}
		.ct_index_st{
			display:inline-block;
			width: 25px;
			height: 10px;
			background-color:#ccc;
			border-radius: 5px;
			cursor:pointer;
			margin:15px 5px;
		}
		.ct_index_bg{
			background-color:orangered;
		}
	</style>
</head>
<body>
	<div id="slideShow">
		<div id="main_scroll" class="main-scroll">
			<div id="slideShow_main" class="slideShow-main">
				<div class="main-img">
					<a href="javascript:">
						<img src="../html5/images/13.jpg" alt="">
					</a>
				</div>
				<div class="main-img">
					<a href="javascript:">
						<img src="../html5/images/14.png" alt="">
					</a>
				</div>
				<div class="main-img">
					<a href="javascript:">
					<img src="../html5/images/15.jpg" alt="">
					</a>
				</div>
				<div class="main-img">
					<a href="javascript:">
						<img src="../html5/images/16.jpg" alt="">
					</a>
				</div>
			</div>
		</div>
		<div id="ct">
			<span id="ct_left" class="ct-dir left">&lt;</span>
			<span id="ct_right" class="ct-dir right">&gt;</span>
			<div id="ct_index" class="ct-index">
			</div>
		</div>
	</div>
	<script src="myFun函数库.js"></script>
	<script>
		window.onload = function(){
			//1.0 获取节点
			var slideShow = $("#slideShow");
			var main_scroll = $("#main_scroll");
			var slideShow_main = $("#slideShow_main");
			var img = slideShow_main.children;
			var ct= $("#ct");
			var ct_index = $("#ct_index");
			//2.0 动态设置指示器
			for (var i = 0; i < img.length; i++) {
				var span = document.createElement("span");
				span.className = "ct_index_st";
				ct_index.appendChild(span);
			}
			//3.0 让第一个指示器被选中
			ct_index.children[0].className = "ct_index_bg ct_index_st"; 
			//4.0 让第一张显示，
			var scroll_w = main_scroll.offsetWidth;
			for (var j = 1; j < img.length; j++) {
				img[j].style.left= scroll_w+"px";
			}
			//5.0 监听控制按键点击
			var iCurrent = 0;
			var nowIndex = 0;
			for (var i = 0; i < ct.children.length; i++) {
				//5.01 给每个控制层绑定点击事件
				ct.children[i].onmousedown = function(event){ 
					if (this.id =="ct_left") { 
					//5.1 左边按钮
						/*  滚动原理
						1.0 当前的可视区的图片快速往右移
						2.0 上一张图片快速出现在可视区域的左边
						3.0 让这张图片做动画进入
						*/
						slowAnimation(img[iCurrent],{left:scroll_w},0.2);
						iCurrent--;
						if (iCurrent < 0) {
							iCurrent = img.length-1;
						}
						img[iCurrent].style.left = -scroll_w+"px";
						slowAnimation(img[iCurrent],{"left":0},0.2);
						//5.1.1 让对应的指示器选中
						ct_index.children[iCurrent].className = "ct_index_bg ct_index_st";
						ct_index.children[nowIndex].className = "ct_index_st";
						nowIndex = iCurrent;
					}else if(this.id =="ct_right"){
					//5.2 右边按钮
						/*  滚动原理
						1.0 当前的可视区的图片快速往左移
						2.0 上一张图片快速出现在可视区域的右边边
						3.0 让这张图片做动画进入
						*/
						slowAnimation(img[iCurrent],{left:-scroll_w},0.2);
						iCurrent++;
						if (iCurrent >= img.length) {
							iCurrent = 0;
						}
						img[iCurrent].style.left = scroll_w+"px";
						slowAnimation(img[iCurrent],{"left":0},0.2);
						//5.2.1 让对应的指示器选中
						ct_index.children[iCurrent].className = "ct_index_bg ct_index_st";
						ct_index.children[nowIndex].className = "ct_index_st";
						nowIndex = iCurrent;
					}else{
					//5.3 下边按钮
						/*
						1.0 用当前点击的索引给被选中的索引做对比
						2.0 如果小于当前被选中索引的话，相当于点击左按钮
						3.0 如果大于当前的被选中的索引的话，相当于点击右边按钮
						*/
						//5.3.1 给每个指示器 绑定索引
						for (var j = 0; j < ct_index.children.length; j++) {
							ct_index.children[j].index = j;
						}
						var e = event || window.event;
						//5.3.2 获取点击的index；
						var currentIndex = e.target.index;
						var targetId = e.target?e.target.id:e.srcElement.id;
						//5.3.3 判断是否是点击的是选择器
						if (targetId != "ct_index") {
							//判断大小
							if (currentIndex > nowIndex) {
								slowAnimation(img[iCurrent],{left:-scroll_w},0.2);
								iCurrent= currentIndex;
								if (iCurrent < 0) {
									iCurrent = img.length-1;
								}
								img[iCurrent].style.left = scroll_w+"px";
								slowAnimation(img[iCurrent],{"left":0},0.2);
								//让对应的指示器选中
								ct_index.children[iCurrent].className = "ct_index_bg ct_index_st";
								ct_index.children[nowIndex].className = "ct_index_st";
								nowIndex = iCurrent;
							}else{
								slowAnimation(img[iCurrent],{left:scroll_w},0.2);
								iCurrent= currentIndex;
								if (iCurrent >= img.length) {
									iCurrent = 0;
								}
								img[iCurrent].style.left = -scroll_w+"px";
								slowAnimation(img[iCurrent],{"left":0},0.2);
								//让对应的指示器选中
								ct_index.children[iCurrent].className = "ct_index_bg ct_index_st";
								ct_index.children[nowIndex].className = "ct_index_st";
								nowIndex = iCurrent;
							}
						}
					}
				}
			}
			//6.0 当鼠标移开时自动播放
			var timer = null;
			auto()
			slideShow.onmouseover = function(){
				clearInterval(timer);
			}
			slideShow.onmouseout = function(){
				auto();
			}
			function auto(){
				clearInterval(timer);
				timer = setInterval(function(){
					slowAnimation(img[iCurrent],{left:-scroll_w},0.2);
					iCurrent++;
					if (iCurrent >= img.length) {
						iCurrent = 0;
					}
					img[iCurrent].style.left = scroll_w+"px";
					slowAnimation(img[iCurrent],{"left":0},0.2);
					//5.2.1 让对应的指示器选中
					ct_index.children[iCurrent].className = "ct_index_bg ct_index_st";
					ct_index.children[nowIndex].className = "ct_index_st";
					nowIndex = iCurrent;
				},3000);
			}
		}
	</script>
</body>
</html>